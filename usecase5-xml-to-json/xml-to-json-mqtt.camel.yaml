- route:
    id: xml-to-json-route
    from:
      id: from-4205
      uri: minio:camel-k-integrations-xml
      parameters:
        accessKey: "{{minio.access-key:minioadmin}}"
        endpoint: "{{minio.endpoint:minio.apps.ocp4.jnyilimb.eu}}"
        objectName: ""
        secretKey: "{{minio.secret-key:zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG}}"
        secure: true
      steps:
        - to:
            id: to-1078
            uri: log:minio
            parameters:
              multiline: true
              showAll: true
              showAllProperties: true
              showHeaders: true
              showProperties: true
        - setProperty:
            id: setProperty-2413
            expression:
              simple:
                expression: ${body}
            name: inputXml
        - setHeader:
            id: setHeader-4160
            expression:
              simple:
                expression: ${header.CamelMinioObjectName}
            name: filename
        - to:
            id: to-3356
            uri: xslt:xml-to-textblock.xslt
            parameters: {}
        - log:
            id: log-3400
            message: "${routeId} >>> Generated textblock: ${body}"
        - setHeader:
            id: setHeader-1851
            expression:
              simple:
                expression: ${body}
            name: textblock
        - setBody:
            id: setBody-4922
            expression:
              simple:
                expression: ${exchangeProperty.inputXml}
        - to:
            id: to-2701
            uri: xslt:xml-to-json.xslt
            parameters: {}
        - log:
            id: log-2473
            message: "${routeId} >>> Generated JSON: ${body}"
        - log:
            id: log-3225
            message: ${routeId} >>> Publishing to SMRS/RETURN/CREJOB/BoostLocker MQTT Topic
        - to:
            id: to-2503
            uri: paho-mqtt5:SMRS/RETURN/CREJOB/BoostLocker
            parameters:
              brokerUrl: "{{broker.url:ssl://amq-ssl-broker-all-0-svc-rte-amq7-broker-cluster\
                .apps.ocp4.jnyilimb.eu:443}}"
              httpsHostnameVerificationEnabled: false
              password: "{{broker.password:P@ssw0rd}}"
              userName: "{{broker.user:xml-to-json-mqtt}}"
            pattern: InOnly
